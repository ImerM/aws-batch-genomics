<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Angel Pizarro <pizarroa@amazon.com>">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Getting Started - AWS for Genomics Workflows</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "aws-batch/configure-aws-batch-start.md";
    var mkdocs_page_url = "/aws-batch/configure-aws-batch-start/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> AWS for Genomics Workflows</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Setting up AWS Batch</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">Getting Started</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#introduction-on-aws-batch-for-genomics-workflows">Introduction on AWS Batch for genomics workflows</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#tldr">TL;DR</a></li>
        
            <li><a class="toctree-l4" href="#the-detailed-explaination">The detailed explaination</a></li>
        
            <li><a class="toctree-l4" href="#next-step-setting-up-a-custom-ami-for-genomics-workflows">Next Step: Setting up a custom AMI for genomics workflows</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../create-custom-ami/">Creating a custom AMI</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Configuring AWS Batch with CloudFormation</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../configure-aws-batch-cfn/">Launch the CloudFormation stacks</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../notes-vpc/">Notes on Amazon VPC</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../notes-iam/">Notes on IAM Permissions</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Setting up a genomics workflow environment</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../genomics-workflows-intro/">Introduction</a>
                </li>
                <li class="">
                    
    <span class="caption-text">AWS Step Functions</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../step-functions/intro-step-functions/">Introduction and requirements</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../step-functions/create-batchjobrunner-container/">Creating a job management container</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../step-functions/create-example-sfl-workflow/">An example workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../cromwell/cromwell-aws-batch/">Cromwell</a>
                </li>
                <li class="">
                    
    <a class="" href="../../nextflow/nextflow-aws-batch/">Nextflow</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">AWS for Genomics Workflows</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Setting up AWS Batch &raquo;</li>
        
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/aws-samples/aws-batch-genomics/edit/master/docs/aws-batch/configure-aws-batch-start.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="introduction-on-aws-batch-for-genomics-workflows">Introduction on AWS Batch for genomics workflows</h1>
<h2 id="tldr">TL;DR</h2>
<p>AWS Batch provides a queue to send jobs to, and will manage the underlying compute necessary to run those jobs. For the impatient, skip to the next step <a href="../create-custom-ami/">"Creating a custom AMI for genomics"</a>.</p>
<h2 id="the-detailed-explaination">The detailed explaination</h2>
<p><a href="https://aws.amazon.com/batch/">AWS Batch</a> is a managed service that helps you efficiently run batch computing workloads on the AWS Cloud. Users submit jobs to job queues, specifying the application to be run and their jobs’ CPU and memory requirements. AWS Batch is responsible for launching the appropriate quantity and types of instances needed to run your jobs.</p>
<p>AWS Batch removes the undifferentiated heavy lifting of configuring and managing compute infrastructure, allowing you to instead focus on your applications and users. This is demonstrated in the <a href="https://www.youtube.com/watch?v=T4aAWrGHmxQ">How AWS Batch Works</a> video.</p>
<p>AWS Batch manages the following resources:</p>
<ul>
<li>Job Definitions</li>
<li>Job Queues</li>
<li>Compute Environments</li>
</ul>
<p>A <a href="http://docs.aws.amazon.com/batch/latest/userguide/job_definitions.html">job definition</a> specifies how jobs are to be run—for example, which Docker image to use for your job, how many vCPUs and how much memory is required, the IAM role to be used, and more.</p>
<p>Jobs are submitted to <a href="http://docs.aws.amazon.com/batch/latest/userguide/job_queues.html">job queues</a> where they reside until they can be scheduled to run on Amazon EC2 instances within a compute environment. An AWS account can have multiple job queues, each with varying priority. This gives you the ability to closely align the consumption of compute resources with your organizational requirements.</p>
<p><a href="http://docs.aws.amazon.com/batch/latest/userguide/compute_environments.html">Compute environments</a> provision and manage your EC2 instances and other compute resources that are used to run your AWS Batch jobs. Job queues are mapped to one more compute environments and a given environment can also be mapped to one or more job queues. This many-to-many relationship is defined by the compute environment order and job queue priority properties.</p>
<p>The following diagram shows a general overview of how the AWS Batch resources interact.</p>
<p><img alt="AWS Batch environment" src="https://d2908q01vomqb2.cloudfront.net/1b6453892473a467d07372d45eb05abc2031647a/2018/04/23/AWSBatchresoucreinteract-diagram.png" /></p>
<p>We will be leveraging <a href="https://aws.amazon.com/cloudformation/">AWS CloudFormation</a>, which allows developers and systems administrators to easily create and manage a collection of related AWS resources (called a CloudFormation stack) by provisioning and updating them in an orderly and predictable way.</p>
<p>The provided CloudFormation templates will create the necessary resource for AWS within your Amazon VPC.</p>
<p><img alt="AWS CloudFormation Stack launching a AWS Batch Environment" src="https://d2908q01vomqb2.cloudfront.net/1b6453892473a467d07372d45eb05abc2031647a/2018/04/23/Picture1-1.png" /></p>
<p>Specifically, the templates will create:</p>
<ol>
<li>A new Amazon S3 bucket to write results to.</li>
<li>A new Amazon S3 bucket to send log data to.</li>
<li>A AWS Batch Compute Environment that utilizes <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html">EC2 Spot instances</a> for cost-effective computing</li>
<li>A AWS Batch Compute Environment that utilizes EC2 on-demand (e.g. <a href="https://aws.amazon.com/ec2/pricing/on-demand/">public pricing</a>) instances for high-priority work that can't risk job interruptions or delays due to insufficient Spot capacity.</li>
<li>A default AWS Batch Job Queue that utilizes the Spot compute environment first, but falls back to the on-demand compute environment if there is spare capacity already there.</li>
<li>A high-priority AWS Batch Job Queue that leverages the on-demand and Spot CE's (in that order) and has higher priority than the default queue.</li>
</ol>
<p>Here is a conceptual diagram of the proposed architecture:</p>
<p><img alt="AWS Batch environment for genomics" src="https://d2908q01vomqb2.cloudfront.net/1b6453892473a467d07372d45eb05abc2031647a/2018/04/23/Picture2.png" /></p>
<h2 id="next-step-setting-up-a-custom-ami-for-genomics-workflows">Next Step: Setting up a custom AMI for genomics workflows</h2>
<p>Genomics is a data-heavy workload and requires some modification to the standard AWS Batch processing environment. In particular, we need to scale underlying instance storage that Tasks/Jobs run on top of to meet unpredictable runtime demands.</p>
<p><strong><a href="../create-custom-ami/">Create a custom AMI for genomics workloads</a></strong></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../create-custom-ami/" class="btn btn-neutral float-right" title="Creating a custom AMI">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>2018 Amazon Web Services</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/aws-samples/aws-batch-genomics/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../create-custom-ami/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
